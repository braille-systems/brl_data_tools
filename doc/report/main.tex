% !TeX spellcheck = en_US
% !TeX program = lualatex

\documentclass[a4paper,12pt]{article}
\usepackage[T2A, T1]{fontenc} % russian
\usepackage[english, russian]{babel} % russian

% fonts
\usepackage{fontspec} % different fonts
\setmainfont{Times New Roman}
\usepackage{amsmath}
\usepackage{amssymb} %common math symbols
\usepackage{dsfont}

% utilities
\usepackage{mathtools} % xRightarrow, xrightleftharpoons, etc
\usepackage{array} % utils for tables
\usepackage{makecell} % multirow for tables
\usepackage{subfiles}
\usepackage{hyperref}
\hypersetup{pdfstartview=FitH,  linkcolor=blue, urlcolor=blue, colorlinks=true}
\usepackage{framed} % advanced frames, boxes
\usepackage{graphicx}
\usepackage{caption} % caption setup
\usepackage{subcaption} % captions for subfigures
\usepackage{color}
\usepackage[backend=biber, bibstyle=gost-numeric, sorting=none, block=space]{biblatex}
\addbibresource{bibliography.bib}
\DeclareFieldFormat[inproceedings]{pagetotal}{\mkpagetotal[bookpagination]{#1}}
\renewbibmacro*{chapter+pages}{%
    \printfield{note}%
    \setunit{\bibpagespunct -}%
    \printfield{pagetotal}%
    \setunit{\bibpagespunct}%
    \printfield{pages}%
    \newunit}


% styling
\usepackage{setspace} % set space between lines
\usepackage{float} % force pictures position
\floatstyle{plaintop} % force caption on top
\usepackage{enumitem} % itemize and enumerate with [noitemsep]
\setlength{\parindent}{0pt} % no indents!

\usepackage{chngcntr}
\counterwithin{figure}{section} % per section figure numbering

% misc
\graphicspath{{./img/}}
\newcommand{\myPictWidth}{\textwidth}
\newcommand{\phm}{\phantom{-}}
\newcommand{\nonumsection}[1]{
    \section*{#1}
    \addcontentsline{toc}{section}{\protect\numberline{}#1}%
}

\begin{document}
\subfile{titlepage}
% TODO реферат + abstract (no page numbering)
\tableofcontents
\newpage
\subfile{parts/intro}
\subfile{parts/problem}
\subfile{parts/pseudolabeling}
\subfile{parts/code}
\subfile{parts/experiments}
\subfile{conclusion}


\newpage
\addcontentsline{toc}{section}{\protect\numberline{}Список использованных источников}
\printbibliography[title={Список использованных источников}]

\end{document}